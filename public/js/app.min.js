"use strict";angular.module("generator",["perfect"]),angular.module("generator").run(),function(){angular.module("errorRange",[]);var e='<figure class="essrange flex-row"><div class="essrange__min" display="{{low}}%" style="flex: 0 1 {{minWidth}}%"></div><div class="essrange__bar"></div><div class="essrange__max" display="{{high}}%" style="flex: 0 1 {{maxWidth}}%"></div><div ng-class="{\'show-label\': showCircleLabel}" class="essrange__val" display="{{val}}%" style="left: calc({{valPos}}% - .5rem)"></div></figure>';angular.module("errorRange").directive("essRange",[function(){return{scope:{min:"=",max:"=",high:"=",low:"=",val:"=",showCircleLabel:"="},template:e,link:function(e,a,r){e.$watch("min+max+high+low+val",function(){var a=e.max-e.min;e.minWidth=(e.low-e.min)/a*100,e.maxWidth=(e.max-e.high)/a*100,e.valPos=(e.val-e.min)/a*100})}}}])}(),function(){angular.module("perfect",["errorRange"]);var e='<figure class="perfect flex-col"><div class="perfect__header flex-row"><div class="perfect__header--question">Q: {{data.question}}</div><div class="perfect__header--relative">Relative lift</div><div class="perfect__header--observed">Absolute lift</div><div class="perfect__header--range">Lift range</div></div><div class="perfect__answer flex-row align-middle" ng-repeat="answer in data.answers"><div class="perfect__answer--copy">{{answer.copy}}</div><div class="perfect__answer--split"><div><progress class="control" max="{{maxPercent}}" value="{{answer.control}}"></progress><label style="left: {{(answer.control / maxPercent) * 100}}%">{{answer.control | number:barDec}}%</label></div><div><progress class="exposed" max="{{maxPercent}}" value="{{answer.exposed}}"></progress><label style="left: {{(answer.exposed / maxPercent) * 100}}%">{{answer.exposed | number:barDec}}%</label></div></div><div class="perfect__answer--relative {{answer.color}}">{{((answer.exposed / answer.control) - 1) * 100.0 | number:relativeDec | pn}}%</div><div class="perfect__answer--observed {{answer.color}}">{{answer.exposed - answer.control | number:observedDec | pn}}%</div><div class="perfect__answer--range"><ess-range min="minRange" max="maxRange" high="answer.range[2]" low="answer.range[0]" val="answer.range[1]" class="{{answer.color}}" show-circle-label="showCircleLabel"></ess-range></div></div></figure>';angular.module("perfect").directive("perfect",[function(){return{scope:{data:"=",barDec:"=",observedDec:"=",relativeDec:"=",showCircleLabel:"="},template:e,link:function(e,a,r){e.$watch("data",function(){var a=e.data.answers.reduce(function(e,a){return parseFloat(a.range[2])>e?parseFloat(a.range[2]):e},-100);e.maxRange=a+.1*a,e.minRange=e.data.answers.reduce(function(e,a){return parseFloat(a.range[0])<e?parseFloat(a.range[0]):e},100),e.maxPercent=e.data.answers.reduce(function(e,a){return a.control>e&&(e=parseFloat(a.control)),a.exposed>e&&(e=parseFloat(a.exposed)),e},-100)+10},!0)}}}]),angular.module("perfect").filter("pn",function(){return function(e){return e>0?"+"+e:e}}),angular.module("perfect").controller("perfect",["$scope",function(e){function a(){e.charts=[];for(var a=0,r=localStorage.length;r>a;++a)e.charts.push(localStorage.key(a))}e.charts=[],a();var r=window.location.hash.replace("#","");""==r&&(r="default"),e.name=r.replace("#","");var o=localStorage.getItem(r);e.data=null==o?{question:"Which of the following do you associate with Chromebook?",answers:[{copy:"Affordable",control:29.2,exposed:33,color:"green",range:[0,3.8,8.3]},{copy:"Comes pre-loaded with apps",control:20.6,exposed:23.9,color:"green",range:[.5,3.3,6.4]},{copy:"Has lots of RAM",control:8.9,exposed:11.9,color:"green",range:[.4,3,6.4]},{copy:"Lightweight",control:34.7,exposed:36.4,color:"orange",range:[-2.1,1.7,6.1]},{copy:"Runs Google docs",control:35.5,exposed:34.5,color:"red",range:[-2.9,-1,4.5]},{copy:"The laptop from Google",control:50.7,exposed:54,color:"green",range:[0,3.3,6.7]}]}:JSON.parse(o),e.$watch("data",function(e){localStorage.setItem(r,JSON.stringify(e)),a()},!0),e.$watch("name",function(e){window.location.hash=e,r=window.location.hash.replace("#","")}),e.clearCharts=function(){localStorage.clear(),window.location.hash="",window.location.reload()},e.changeChart=function(e){window.location.hash=e,window.location.reload()},e.width=100,e.bgColor="#fefefe",e.fgColor="#000",e.theme="google",e.barDec=1,e.observedDec=1,e.relativeDec=1,e.showCircleLabel=!0,e.removeAnswer=function(a){e.data.answers.splice(a,1)},e.addAnswer=function(){e.data.answers.push({copy:"Placeholder",control:50,exposed:50,color:"",range:[0,0,0]})}}])}();